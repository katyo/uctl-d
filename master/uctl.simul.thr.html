<!DOCTYPE html>
<html lang="en">
<head>
        <title>uctl.simul.thr (uctl.simul.thr)</title>
	<meta charset="utf-8" />
	<meta content="width=device-width, initial-scale=1" name="viewport" />
        <link href="style.css" rel="stylesheet" />
        <script src="script.js" type="text/javascript"></script>

	
	<link href="search-results.html" rel="prefetch" />
<link href="katex.min.css" rel="stylesheet" /></head>
<body>
	<div id="page-header">
		<div id="logotype">
		<span>uctl documentation</span>
		<nav>
			<a href="http://github.com/katyo/uctl-d">uctl-d</a>
		</nav>
		</div>

		<form action="search-docs.html" id="search">
			<input name="searchTerm" placeholder="Find a symbol name..." type="search" />
			<input type="submit" value="Go" />
		</form>
	</div>
	<div id="page-body">
		<div id="page-content">
		<h1>uctl.simul.thr</h1><div class="breadcrumbs"><a class="breadcrumb" href="uctl.html">uctl</a> <a class="breadcrumb" href="uctl.simul.html">simul</a> </div><div><div class="documentation-comment synopsis"><div><h3 class="user-header" id="steinhart-hart-model"><a class="header-anchor" href="#steinhart-hart-model">Steinhart-Hart model</a></h3><p>The most accurate math model of thermistor called Steinhart-Hart equation. It is the third-order approximation which looks like that:</p><p><span class="raw-tex-math">\frac{1}{T} = a + b\,\ln(R) + c\,\ln(R)^3</span> (1)</p><p>where <i>R</i> [<i>&#937;</i>] &#8212; thermistor resistance on temperature <i>T</i> [<i>K</i>] (Here and below the temperature measured in Kelvins. For &#176;C you can use formula <span class="raw-tex-math">T = T_{^{o}C} + 273.15</span>. For &#176;F you can use formula <span class="raw-tex-math">T = \left( T_{^{o}F} - 32 \right) \times \frac{5}{9} + 273.15</span>), <i>a</i>, <i>b</i>, <i>c</i> &#8212; Steinhart-Hart parameters.</p><p>Find temperature <i>T</i> from (1):</p><p><span class="raw-tex-math">T = \frac{1}{a + b\,\ln(R) + c\,\ln(R)^3}</span> (2)</p><p>Typically this model allows achieve accuracy up to 0.02&#176; in range over 200&#176;C.</p><p>Parameters can be found using Gauss method with set of experimental <i>T</i>-values and corresponding <i>R</i>-values. Select some three points <span class="raw-tex-math">[R_i, T_i]</span> from experimental set and apply it to (1):</p><p><span class="raw-tex-math">\frac{1}{T_0} = a + b\,\ln(R_0) + c\,\ln(R_0)^3</span> (3.1)</p><p><span class="raw-tex-math">\frac{1}{T_1} = a + b\,\ln(R_1) + c\,\ln(R_1)^3</span> (3.2)</p><p><span class="raw-tex-math">\frac{1}{T_2} = a + b\,\ln(R_2) + c\,\ln(R_2)^3</span> (3.3)</p><p>We have a system of linear algebraic equations with three equations and variables <i>a</i>, <i>b</i> and <i>c</i>. Now we may use Gauss method and eliminate variables step-by-step. Subtract (3.2) from (3.1), and (3.3) from (3.1) in order to we eliminate variable <i>a</i>.</p><p><span class="raw-tex-math">\frac{1}{T_0} - \frac{1}{T_1} = b\,\left( \ln(R_0) - \ln(R_1) \right) + c\,\left( \ln(R_0)^3 - \ln(R_1)^3 \right)</span> (3.12)</p><p><span class="raw-tex-math">\frac{1}{T_0} - \frac{1}{T_2} = b\,\left( \ln(R_0) - \ln(R_2) \right) + c\,\left( \ln(R_0)^3 - \ln(R_2)^3 \right)</span> (3.13)</p><p>Now divide (3.12) by <span class="raw-tex-math">\ln(R_0) - \ln(R_1)</span> and (3.13) by <span class="raw-tex-math">\ln(R_0) - \ln(R_1)</span>:</p><p><span class="raw-tex-math">\frac{\frac{1}{T_0} - \frac{1}{T_1}}{\ln(R_0) - \ln(R_1)} = b + c\,\frac{\ln(R_0)^3 - \ln(R_1)^3}{\ln(R_0) - \ln(R_1)}</span> (3.12')</p><p><span class="raw-tex-math">\frac{\frac{1}{T_0} - \frac{1}{T_1}}{\ln(R_0) - \ln(R_2)} = b + c\,\frac{\ln(R_0)^3 - \ln(R_2)^3}{\ln(R_0) - \ln(R_2)}</span> (3.13')</p><p>Subtract (3.13') from (3.12') in order to eliminate variable <i>b</i>:</p><p><span class="raw-tex-math">\frac{\frac{1}{T_0} - \frac{1}{T_1}}{\ln(R_0) - \ln(R_1)} - \frac{\frac{1}{T_0} - \frac{1}{T_1}}{\ln(R_0) - \ln(R_2)} = c\,\left( \frac{\ln(R_0)^3 - \ln(R_1)^3}{\ln(R_0) - \ln(R_1)} - \frac{\ln(R_0)^3 - \ln(R_2)^3}{\ln(R_0) - \ln(R_2)} \right)</span> (3.123)</p><p>Now we can find formula for direct computation of parameter <i>c</i>:</p><p><span class="raw-tex-math">c = \frac{\frac{\frac{1}{T_0} - \frac{1}{T_1}}{\ln(R_0) - \ln(R_1)} - \frac{\frac{1}{T_0} - \frac{1}{T_1}}{\ln(R_0) - \ln(R_2)}}{\frac{\ln(R_0)^3 - \ln(R_1)^3}{\ln(R_0) - \ln(R_1)} - \frac{\ln(R_0)^3 - \ln(R_2)^3}{\ln(R_0) - \ln(R_2)}}</span> (3.c)</p><p>Find parameter <i>b</i> from (3.12') bearing in mind, that parameter <i>c</i> we can found using (3.c):</p><p><span class="raw-tex-math">b = \frac{\frac{1}{T_0} - \frac{1}{T_1}}{\ln(R_0) - \ln(R_1)} - c\,\frac{\ln(R_0)^3 - \ln(R_1)^3}{\ln(R_0) - \ln(R_1)}</span> (3.b)</p><p>Now, when we know parameters <i>c</i> and <i>b</i>, we can find parameter <i>a</i> from (3.1):</p><p><span class="raw-tex-math">a = \frac{1}{T_0} - b\,\ln(R_0) + c\,\ln(R_0)^3</span> (3.a)</p><h3 class="user-header" id="simplified-&#946;-model"><a class="header-anchor" href="#simplified-&#946;-model">Simplified &#946;-model</a></h3><p>Typically values of parameters of Steinhart-Hart model is too small, so practical using that model presents some difficulties. In order to simplify this model, we can represent this parameters by the following way:</p><p><span class="raw-tex-math">a = \frac{1}{T_0} - \frac{1}{\beta} \ln(R_0) \vert b = \frac{1}{\beta} \vert c = 0</span> (4.1)</p><p>After substituting (4.1) into (1) we have:</p><p><span class="raw-tex-math">\frac{1}{T} = \frac{1}{T_0} + \frac{1}{\beta} \ln \left( \frac{R}{R_0} \right)</span> (4.2)</p><p>Find <i>T</i> from (4.2):</p><p><span class="raw-tex-math">T = \frac{1}{\frac{1}{T_0} + \frac{1}{\beta} \ln \left( \frac{R}{R_0} \right)}</span> (5.1)</p><p>Or:</p><p><span class="raw-tex-math">T = \frac{T_0 \beta}{T_0\,ln \left( \frac{R}{R_0} \right) + \beta}</span> (5.2)</p><p>Parameter <span class="raw-tex-math">\beta</span> can be found as following:</p><p><span class="raw-tex-math">\beta = \frac{\ln \left( \frac{R}{R_0} \right)}{(\frac{1}{T}) - (\frac{1}{T_0})}</span> (6.1)</p><p>Or:</p><p><span class="raw-tex-math">\beta = \frac{T_0\,T\,ln\left( \frac{R}{R_0} \right)}{T_0-T}</span> (6.2)</p><p>As you can see, this parameter can be found, when we have at least two experimental values of resistance <i>R</i> and corresponding temperature <i>T</i>. But for some reasons model will be less-precise in this case.</p><p><img alt="Comparison of thermistor models" src="thr_fit.svg" /></p></div></div></div><div class="annotated-prototype"></div><h2 id="members">Members</h2><h3 class="member-list-header hide-from-toc" id="alias">Aliases</h3><dl class="member-list native"><dt><a href="uctl.simul.thr.Beta.html">Beta</a><div class="simplified-prototype" style="max-width: 48ch;"><span class="builtin-type">alias</span> <span class="name">Beta</span> = <tt class="highlighted"><span class="hid">Model</span>!(<span class="str">&quot;Simplified beta model&quot;</span>)</tt></div></dt><dd><div><p>Simplified &#946;-model of thermistor</p></div></dd><dt><a href="uctl.simul.thr.SteinhartHart.html">SteinhartHart</a><div class="simplified-prototype" style="max-width: 57ch;"><span class="builtin-type">alias</span> <span class="name">SteinhartHart</span> = <tt class="highlighted"><span class="hid">Model</span>!(<span class="str">&quot;Steinhart-Hart model&quot;</span>)</tt></div></dt><dd><div><p>Steinhart-Hart thermistor model</p></div></dd></dl><h3 class="member-list-header hide-from-toc" id="function">Functions</h3><dl class="member-list native"><dt><a href="uctl.simul.thr.mk.1.html">mk</a><div class="simplified-prototype" style="max-width: 39ch;"><tt class="highlighted"><span class="hid">Param</span>!(<span class="hid">M</span>, <span class="hid">A</span>, <span class="hid">B</span>, <span class="hid">C</span>)</tt> <span class="name">mk</span>(A a, B b, C c)</div></dt><dd><div><p>Create parameters for Steinhart-Hart model of thermistor</p></div></dd><dt><a href="uctl.simul.thr.mk.2.html">mk</a><div class="simplified-prototype" style="max-width: 45ch;"><tt class="highlighted"><span class="hid">Param</span>!(<span class="hid">M</span>, <span class="hid">R</span>, <span class="hid">T</span>, <span class="hid">B</span>)</tt> <span class="name">mk</span>(R r0, T t0, B beta)</div></dt><dd><div><p>Create parameters for simplified &#946;-model of thermistor</p></div></dd></dl><h3 class="member-list-header hide-from-toc" id="struct">Structs</h3><dl class="member-list native"><dt><a href="uctl.simul.thr.Model.html">Model</a><div class="simplified-prototype" style="max-width: 74ch;"><span class="builtin-type">struct</span> <span class="name">Model</span><span class="template-params">(string name_, bool calcT_ = false, bool calcR_ = false)</span></div></dt><dd><div><p>Thermistor model</p></div></dd><dt><a href="uctl.simul.thr.Param.1.html">Param</a><div class="simplified-prototype" style="max-width: 33ch;"><span class="builtin-type">struct</span> <span class="name">Param</span><span class="template-params">(alias M, A, B, C)</span></div></dt><dd><div><p>Thermistor parameters for Steinhart-Hart model</p></div></dd><dt><a href="uctl.simul.thr.Param.2.html">Param</a><div class="simplified-prototype" style="max-width: 33ch;"><span class="builtin-type">struct</span> <span class="name">Param</span><span class="template-params">(alias M, R, T, B)</span></div></dt><dd><div><p>Thermistor parameters for simplified &#946;-model</p></div></dd></dl><h3 class="member-list-header hide-from-toc" id="template">Templates</h3><dl class="member-list native"><dt><a href="uctl.simul.thr.calcR.html">calcR</a><div class="simplified-prototype" style="max-width: 25ch;"><span class="builtin-type">template</span> <span class="name">calcR</span><span class="template-params">(alias M)</span></div></dt><dd><div><p>Enable resistance from temperature calculation</p></div></dd><dt><a href="uctl.simul.thr.calcT.html">calcT</a><div class="simplified-prototype" style="max-width: 25ch;"><span class="builtin-type">template</span> <span class="name">calcT</span><span class="template-params">(alias M)</span></div></dt><dd><div><p>Enable temperature from resistance calculation</p></div></dd><dt><a href="uctl.simul.thr.isModel.html">isModel</a><div class="simplified-prototype" style="max-width: 24ch;"><span class="builtin-type">template</span> <span class="name">isModel</span><span class="template-params">(X...)</span></div></dt><dd><div><p>Check that type is thermistor model</p></div></dd><dt><a href="uctl.simul.thr.mk.3.html">mk</a><div class="simplified-prototype" style="max-width: 39ch;"><span class="builtin-type">template</span> <span class="name">mk</span><span class="template-params">(alias M, R0, T0, R1, T1)</span></div></dt><dd><div><p>Create parameters for simplified &#946;-model of thermistor using two points <span class="raw-tex-math">[R_x, T_x]</span></p></div></dd></dl><h2 id="mixed-in-members">Mixed In Members</h2><h3>From <tt class="highlighted"><span class="kwrd">mixin</span> <span class="hid">unittests</span> </tt></h3><dl class="member-list native"></dl><div></div></div>
		<div id="page-nav"><a class="parent" href="uctl.html">uctl</a> <a class="parent" href="uctl.simul.html">simul</a> 
		<span class="type-separator">modules</span><ul><li><a class="module" href="uctl.simul.dcm.html">dcm</a></li><li><a class="module" href="uctl.simul.htr.html">htr</a></li><li><a class="module current" href="uctl.simul.thr.html">thr</a></li></ul></div>
	</div>
	<div id="page-footer">Page generated by <a href="https://github.com/adamdruppe/adrdox">adrdox</a></div>
<script onload="document.querySelectorAll('span.raw-tex-math').forEach(function(e){e.outerHTML=katex.renderToString(e.innerText)})" src="katex.min.js" type="text/javascript"></script></body>
</html>